(()=>{"use strict";let t=document.querySelector("#start"),e=document.querySelector("#easy_mode"),i=document.querySelector("#medium_mode"),n=document.querySelector("#hard_mode"),l=document.querySelector("#game_board");e.addEventListener("click",(function(){t.style.display="none",function(){document.querySelector("body");let t=document.querySelector("#start"),e=document.querySelector("#field"),i=document.querySelector("#counter"),n=["red","green","blue"];for(let t=0;t<3;t++){let t=document.createElement("tr");e.appendChild(t);for(let e=0;e<3;e++){let e=document.createElement("td");t.appendChild(e),e.classList.add(n[Math.floor(3*Math.random())+0])}}function l(){this.setAttribute("class",function(t,e){for(let i=0;i<t.length;i++)if(e.getAttribute("class")==t[i])return"blue"!==t[i]?t[i+1]:t[0]}(n,this))}let s=e.querySelectorAll("td");for(let t of s)t.addEventListener("click",l);let r=0,a=0;e.addEventListener("click",(function e(n){if("TD"==n.target.tagName){r++;let n=[];for(let t=0;t<s.length;t++){let e=s[t].getAttribute("class");n.push(e)}let o=n.filter(((t,e,i)=>i.indexOf(t)!==e));if(i.textContent="Сделано ходов: "+r,8==o.length){alert("Победа. Возвращаемся в основное меню"),a++,1==a&&(this.innerHTML="",this.parentElement.classList.remove("easy_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let t of s)t.removeEventListener("click",l);i.textContent=""}}return a}))}(),l.classList.add("easy_mode")})),i.addEventListener("click",(function(){t.style.display="none",function(){document.querySelector("body");let t=document.querySelector("#start"),e=document.querySelector("#field"),i=document.querySelector("#counter"),n=["red","green","blue","yellow","darkmagenta"];for(let t=0;t<6;t++){let i=document.createElement("tr");i.dataset.row=t,e.appendChild(i);for(let t=0;t<6;t++){let e=document.createElement("td");e.dataset.num=t,i.appendChild(e),e.classList.add(n[Math.floor(5*Math.random())+0])}}function l(t,e){for(let i=0;i<t.length;i++)if(e.getAttribute("class")==t[i])return"darkmagenta"!==t[i]?t[i+1]:t[0]}function s(){if(0==this.parentElement.dataset.row){let t=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&e.setAttribute("class",l(n,e))}if(5==this.parentElement.dataset.row){let t=this.parentElement.previousElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&e.setAttribute("class",l(n,e))}else if(this.parentElement.dataset.row>0&&this.parentElement.dataset.row<5){let t=this.parentElement.previousElementSibling.childNodes,e=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&e.setAttribute("class",l(n,e));for(let t of e)this.dataset.num==t.dataset.num&&t.setAttribute("class",l(n,t))}}let r=e.querySelectorAll("td");for(let t of r)t.addEventListener("click",s);let a=0,o=0;e.addEventListener("click",(function e(n){if("TD"==n.target.tagName){a++;let n=[];for(let t=0;t<r.length;t++){let e=r[t].getAttribute("class");n.push(e)}let l=n.filter(((t,e,i)=>i.indexOf(t)!==e));if(i.textContent="Сделано ходов: "+a,35==l.length){alert("Победа. Возвращаемся в основное меню"),o++,1==o&&(this.innerHTML="",this.parentElement.classList.remove("medium_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let t of r)t.removeEventListener("click",s);i.textContent=""}}return o}))}(),l.classList.add("medium_mode")})),n.addEventListener("click",(function(){t.style.display="none",function(){document.querySelector("body");let t=document.querySelector("#start"),e=document.querySelector("#field"),i=document.querySelector("#counter"),n=["red","green","blue","yellow","darkmagenta","orange","cyan"];for(let t=0;t<9;t++){let i=document.createElement("tr");i.dataset.row=t,e.appendChild(i);for(let t=0;t<9;t++){let e=document.createElement("td");e.dataset.num=t,i.appendChild(e),e.classList.add(n[Math.floor(7*Math.random())+0])}}function l(t,e){for(let i=0;i<t.length;i++)if(e.getAttribute("class")==t[i])return"cyan"!==t[i]?t[i+1]:t[0]}function s(){if(0==this.parentElement.dataset.row){let t=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&0!==this.dataset.num&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&8!==this.dataset.num&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&(e.setAttribute("class",l(n,e)),e.previousElementSibling&&0!==e.dataset.num&&e.previousElementSibling.setAttribute("class",l(n,e.previousElementSibling)),e.nextElementSibling&&8!==e.dataset.num&&e.nextElementSibling.setAttribute("class",l(n,e.nextElementSibling)))}if(8==this.parentElement.dataset.row){let t=this.parentElement.previousElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&0!==this.dataset.num&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&8!==this.dataset.num&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&(e.setAttribute("class",l(n,e)),e.previousElementSibling&&0!==e.dataset.num&&e.previousElementSibling.setAttribute("class",l(n,e.previousElementSibling)),e.nextElementSibling&&8!==e.dataset.num&&e.nextElementSibling.setAttribute("class",l(n,e.nextElementSibling)))}else if(this.parentElement.dataset.row>0&&this.parentElement.dataset.row<8){let t=this.parentElement.previousElementSibling.childNodes,e=this.parentElement.nextElementSibling.childNodes;this.setAttribute("class",l(n,this)),this.previousElementSibling&&0!==this.dataset.num&&this.previousElementSibling.setAttribute("class",l(n,this.previousElementSibling)),this.nextElementSibling&&8!==this.dataset.num&&this.nextElementSibling.setAttribute("class",l(n,this.nextElementSibling));for(let e of t)this.dataset.num==e.dataset.num&&(e.setAttribute("class",l(n,e)),e.previousElementSibling&&0!==e.dataset.num&&e.previousElementSibling.setAttribute("class",l(n,e.previousElementSibling)),e.nextElementSibling&&8!==e.dataset.num&&e.nextElementSibling.setAttribute("class",l(n,e.nextElementSibling)));for(let t of e)this.dataset.num==t.dataset.num&&(t.setAttribute("class",l(n,t)),t.previousElementSibling&&0!==t.dataset.num&&t.previousElementSibling.setAttribute("class",l(n,t.previousElementSibling)),t.nextElementSibling&&8!==t.dataset.num&&t.nextElementSibling.setAttribute("class",l(n,t.nextElementSibling)))}}let r=e.querySelectorAll("td");for(let t of r)t.addEventListener("click",s);let a=0,o=0;e.addEventListener("click",(function e(n){if("TD"==n.target.tagName){a++;let n=[];for(let t=0;t<r.length;t++){let e=r[t].getAttribute("class");n.push(e)}let l=n.filter(((t,e,i)=>i.indexOf(t)!==e));if(i.textContent="Сделано ходов: "+a,80==l.length){alert("Победа. Возвращаемся в основное меню"),o++,1==o&&(this.innerHTML="",this.parentElement.classList.remove("hard_mode"),t.style.display="flex"),this.removeEventListener("click",e);for(let t of r)t.removeEventListener("click",s);i.textContent=""}}return o}))}(),l.classList.add("hard_mode")}))})();